<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tas: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tas
   </div>
   <div id="projectbrief">Toy two pass assembler in C.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Toy Two Pass Assembler {#mainpage}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;======================</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;The project is based on Yonatan Zilpa&#39;s excersie. A brief explanation can be found [here](https://www.magmath.com/english/programming/c_programming_language/projects/two_pass_assembler.php).</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;The majority of the following is just a direct copy of that site.</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;Some differences:</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    + I&#39;m using hexadecimal (base 16) numeric system insted of octal.</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    + .entry MAIN needed to be defined explicitly.</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    + There wont be any generated .ent/.ext files, if they are not needed.</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;# &quot;Hardware&quot;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;Our computer architecture consists from CPU (Central Processing Unit), registers and Random Access Memory RAM, where part of the memory is being used as a stack. The size of each word in memory is 16 bits. Arithmetics is to be carried by the &#39;2&#39;s complement&#39; method. Our computer machine can only handle integers (Positives or negatives), it doesn&#39;t handle real numbers.</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;## Registers</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;Our computer machine includes the following list of registers:</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;+ Eight general registers (**r0**, **r1**, **r2**, **r3**, **r4**, **r5**, **r6**, **r7**)</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;+ One Program Counter register (**PC**).</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;+ One Stack Pointer register (**SP**).</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;+ One Status register (**PSW** - Program Status Word) which has two flags: **carry flag** and **zero flag**.</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;All registers are 16 bits in size.</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;The two first bits of the PSW register are C and Z in correspondence</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;The size of memory is 2000 words (each word is 16 bits in size).</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;Characters are coded in ASCII.</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;# Instructions</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;In our computer machine, instruction is a word (16 bits in size) that carries information about the operator and operands. Although instruction is a string of 16 bits, it can be divided into fields. The following table provides further information about the instruction. The bits are in decimal number system.</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;| Fields | Operation | Source Operand            ||  Destination Operand      ||</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;| ------ | --------- | --------------- | ---------| ----------------| -------- |</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;|        |           | Addressing Mode | Register | Addressing Mode | Register |</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;| Bits   | 15-12     | 11-9            | 8-6      | 5-3             | 2-0      |</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;The following table maps operator&#39;s name to its corresponding instruction code (opcode).</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;| Operator     | Opcode |</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;| ------------ | ------ |</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;|  ``` mov ``` | 0         |</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;|  ``` cmp ``` | 1     |</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;|  ``` add ``` | 2     |</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;|  ``` sub ``` | 3     |</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;|  ``` mul ``` | 4     |</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;|  ``` div ``` | 5     |</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;|  ``` lea ``` | 6     |</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;|  ``` inc ``` | 7     |</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;|  ``` dec ``` | 8     |</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;|  ``` jnz ``` | 9     |</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;|  ``` jnc ``` | a     |</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;|  ``` shl ``` | b     |</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;|  ``` prn ``` | c     |</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;|  ``` jsr ``` | d     |</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;|  ``` rts ``` | e     |</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;|  ``` hlt ``` | f     |</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;All operators are written in lower case letters, details on the meaning of these operators will be specified later.</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;+ **Bits 9-11**: This field refers to the addressing mode of the source operand. Depending on the value of this field (numeric values of bits 9-11) , the instruction may refer to additional word (first additional word)</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;+ **Bits 6-8**: This field refers to the register of the source operand. The field (bits 6-8) maps its numeric value n to register rn.</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   *Notice*: If the addressing mode in the source operand does not require the source register, then the source register field are not in use. In such a case the numeric value of the field (bits 6-8) is equal to zero.</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;+ **Bits 3-5**: This field refers to the addressing mode of the destination operand. Depending on the numeric value of this field (bits 3-5) , the instruction may refer to additional word (second additional word)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;+ **Bits 0-2**: This field refers to the register of the destination operand. The field (bits 0-2) maps its numeric value n to register rn.</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   *Notice*: If the addressing mode in the destination operand does not require the destination register, then the source register field are not in use. In such a case the numeric value of the field (bits 6-8) is equal to zero.</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;There are six types of addressing modes in our assembly language, some of these modes require additional information, i.e. additional word. The following table provides information on all types of addressing mode.</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;| First Word                                        ||| Additional Word | Operand | Way of Writing | &amp;nbsp;&amp;nbsp;Example&amp;nbsp;&amp;nbsp; |</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;| ----------- | ------------------ | ---------------- | --------------- | ------- | -------------- | ------- |</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;| Field Value | Name               | Register         |                 |         |                |         |</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;| 0 | Instant addressing | zero (not in use) | yes | The numeric value of the operand is determined by the numeric value of the additional word. | The operand is a number preceded by the &#39;#&#39; sign. | ``` mov #-1,r2 ``` |</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;| 1 | Direct addressing | zero (not in use) | yes |    The additional word contains memory address. The numeric value of the operand is the value of this address. | The operand is a label, either declared or expected to be declared later in the file. | ``` mov x,r2 ``` |</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;| 2 | Indirect addressing | zero (not in use) | yes | The numeric value of the additional word contains memory address. The value of this address is also a memory address. The value of the second address is the numeric value of the operand. | Indirect addressing is indicated by the &#39;@&#39; sign which appeared just before the label. The label is declared in the same way as in the direct addressing mode. | ``` mov @x,r2 ``` |</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;| 3 | Relative addressing | zero (not in use) | yes | The additional word contains an integer number (positive or negative) indicating the distance in words from the current command to the address of the operand. | The operand is a label, defined as in the case of direct addressing mode, preceded by the &#39;*&#39; sign. | ``` mov *x,r2 ``` |</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;| 4 | Direct register addressing | n (positive integer) | no | Register rn contains the value of the operand. | The operand is a legal register name. | ``` mov r1,r2 ``` |</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;| 5 | Indirect register addressing | n (positive integer)) | no | Register rn contains information on memory address. This memory address contains the operand. | The operand is a legal register name indicated by the &#39;@&#39; sign. | ``` mov @r1,r2 ``` |</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;## Machine Instruction Characterization</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;Machine instruction may be classified into three different classes (according to the number of operands appeared in each instruction).</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;## First Class of Operators</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;The first class contains all machine instructions that get two operands. Any machine instruction that belongs to this class may contain one of the following operators:</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;```</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        mov, cmp, add, sub, mul, div, lea, shl</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;```</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;The following table provides further explanation on the operational aspects of these operators:</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;| Numeric Code | Operator | Description | &amp;nbsp;&amp;nbsp;Example&amp;nbsp;&amp;nbsp;| Example Description |</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;| ------------ | -------- | ----------- | ------- | ------------------- |</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;| 0 | ``` mov ``` | Copies the value of the source operand (the first operand) to the destination operand (the second operand).    |  ``` mov A, r1 ``` | Copy the value of A to register r1. |</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;| 1    | ``` cmp ``` | Compare between two operands. The cmp operator subtracts the destination operand from the source operand, without saving the subtraction result, it then updates the zero flag, flag z, in the status register, PSW. | ``` cpm A, r1 ``` | If the values of A and r1 are equal, then the zero flag A, in the status register PSW, is turned on. Else the zero flag is turned off. |</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;| 2 | ``` add ``` |    The destination operand is assigned with the value of the source operand plus the value of the destination operand. | ``` add A, r0 ``` | Register r0 gets the sum of r0 and A. |</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;| 3    | ``` sub ``` | The destination operand is assigned with the value of the source operand minus the value of the destination operand. |  ``` sub #3, r1 ``` | Register r1 is assigned with the value of r1 minus 3. |</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;| 4 | ``` mul ``` | Destination operand assigned with the value of the source operand times the value of destination operand |  ``` mul A, r2 ``` | Register r2 assigned with A times r2. |</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;| 5 | ``` div ``` |    Destination operand is assigned with the value of destination operand divided by the source operand (destination divided by source) | ``` div A, r2 ``` | Register r2 assigned with r2/A. |</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;| 6 | ``` lea ``` |    Acronym for &#39;load effective address&#39;. This operation loads memory address, marked with the label appeared in the first operand to the destination operand. |  ``` lea ABC, r1  ``` | The memory address of label ABC is assigned to register r1. |</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;| b | ``` shl ``` | Shift bits to the left in the source operand. The number of shifts is determined by the value of the destination operand. |  ``` shl r1, #1 ``` | Register r1 is shifted 1 bit to the left.</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;## Second Class of Operators</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;The second class contains all machine instructions that gets one operand. In such cases there is no source operand, thus bits 6-11 are meaningless (their values is zero). Any machine instruction in this class may contain one of the following instruction:</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;```</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        inc, dec, jnz, jnc, prn, jsr</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;```</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;The following table provides further explanation on the operational aspects of these operators:</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;| Numeric Code | Operator | Description | &amp;nbsp;&amp;nbsp;Example&amp;nbsp;&amp;nbsp; | Example Description |</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;| ------------ | -------- | ----------- | ------- | ------------------- |</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;| 7 | ``` inc ``` | The operand is increased by one. |  ``` inc r2 ``` | Register r2 is assigned with r2 plus 1. |</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;| 8 | ``` dec ``` |    The operand is decreased by one. |  ``` dec r2 ``` | Register r2 is assigned with r2 minus 1. |</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;| 9 | ``` jnz ``` |    Acronym: jump if not zero. The Program Counter register PC is assigned with the source operand if the Z flag, in the Program Status Word register PSW is not zero. |  ``` jnz LINE ``` | If the Z flag (in the PSW register) is not zero, then PC register is assigned with LINE. |</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;| a | ``` jnc ``` |    Acronym: jump if not carry. The Program Counter register PC is assigned with zero if the C flag, in the Program Status Word register PSW is not 0. |  ``` jnc LINE ``` | If the C flag (in the PSW register) is not zero, then PC register is assigned with LINE. |</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;| c | ``` prn ``` |    Prints the ASCII equivalent of the operand to the standard output file (stdout). |  ``` prn r1 ``` | The ASCII equivalent character of the value stored in r1 is printed to standard file. |</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;| d | ``` jsr ``` | Calls a subroutine that pushes register PC to the running time stack and assign the operand to the Program Counter register PC.    |  ``` jsr FUNC ``` | stack[SP] = PC&lt;br&gt; SP = SP-1 &lt;br&gt; PC = FUNC |</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;## Third Class of Operators</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;The third class contains all machine instructions that gets no operands. In such cases bits 0-11 are meaningless (their values is zero). Any machine instruction in this class may contain one of the following instruction:</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;```</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        rts, hlt</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;```</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;The following table provides further explanation on the operational aspects of these operators:</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;| Numeric Code | Operator | Description | &amp;nbsp;&amp;nbsp;Example&amp;nbsp;&amp;nbsp; | Example Description |</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;| ------------ | -------- | ----------- | ------- | ------------------- |</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;| e | ``` rts ``` | Pops a value from the running time stack and move this value to the Program Counter register. |  ``` rts ``` | SP = SP+1 &lt;br&gt; PC = stack[SP] |</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;| f | ``` hlt ``` | Halts the program. | ``` hlt  ``` | Halting the program.</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;## Legal addressing modes</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;The following table contains information on legal addressing mode for the source and destination operands.</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;| Operator  | Legal Addressing Modes for the Source Operand | Legal Addressing Modes for the Destination Operand |</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;| --------- | --------------------------------------------- | -------------------------------------------------- |</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;| ```mov``` | 0,1,2,3,4,5                                  | 1,2,3,4,5                                          |</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;| ```cmp``` | 0,1,2,3,4,5                                  | 0,1,2,3,4,5                                        |</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;| ```add``` | 0,1,2,3,4,5                                  | 1,2,3,4,5                                          |</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;| ```sub``` | 0,1,2,3,4,5                                  | 1,2,3,4,5                                          |</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;| ```mul``` | 0,1,2,3,4,5                                  | 1,2,3,4,5                                          |</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;| ```div``` | 0,1,2,3,4,5                                  | 1,2,3,4,5                                          |</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;| ```lea``` | 1                                                | 1,2,3,4,5                                          |</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;| ```inc``` | No source operand                                | 1,2,3,4,5                                          |</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;| ```dec``` | No source operand                                | 1,2,3,4,5                                          |</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;| ```jnz``` | No source operand                                | 1,2,3,5                                            |</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;| ```jnc``` | No source operand                                | 1,2,3,5                                            |</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;| ```shl``` | 1,2,3,4,5                                        | 0,1,2,3,4,5                                        |</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;| ```prn``` | No source operand                                | 0,1,2,3,4,5                                        |</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;| ```jsr``` | No source operand                                | 1,2,3,5                                            |</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;| ```rts``` | No source operand                                | No source operand                                  |</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;| ```hlt``` | No source operand                                | No source operand                                  |</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;# Statements</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;Our assembly language is consisted of statements separated by the new line character &#39;\\n&#39;. When we look into a file it appeared to be made out of lines of statements, each statement appeared in its own line.</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;Our assembly language has four types of statements. These statements described in the following table.</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;| Type of statement | General Explanation |</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;| ----------------- | ------------------- |</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;| Empty Statement | Line with this kind of statement may contains only white spaces: tab character &#39;\\t&#39; or space character &#39; &#39; |</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;| Comment Statement    | The first character in a line with this statement is the semicolon &#39;;&#39; character. This line should be completely ignored by the assembler. |</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;| Declarative Statement    | This statement is a directive to the assembler program. It does not generate machine instruction. |</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;| Operation Statement | This statement generates machine instruction that needs to be executed by the CPU. The statement represent machine instruction in symbolic form. |</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;## Directive Statement</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;Directive statement is of the following form:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;Directive statement may optionally start with a label, the label has to follow certain syntax rules (to be described later). Directive can start with or without a label, in any case a directive name, preceded by a dot &#39;.&#39; character, must be included. NO whitespace allowed between the &#39;.&#39; character and the directive name. If the directive does include a label, then at least one whitespace character is separating between the label and the &#39;.&#39; character. Following the directive name, whitespace-separated, appearing, in the same line, the directive parameters (the number of parameters is determined by the type of the directive). As mentioned, directive statement may include four types of directive:</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;1. .data</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    The parameter(s) of data is a list of legal numbers separated by a comma &#39;,&#39; character. For example:</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;```</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        .data    +7,-57 ,17   ,    9</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;```</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    Notice that any number of whitespace characters may appear between the number(s) and the comma character(s). However, the comma character must separate between two numeric values.</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    The &#39;.data&#39; directive statement directs the assembler to allocate space in its data image where the appropriate numeric parameters is to be stored. It also direct the assembler to advance the data counter by the number of parameters (of the &#39;.data&#39; directive). If the &#39;.data&#39; directive has a label name, then this label name is assigned with the value in the data image (before it was advanced) and get inserted to the symbols table. This way we can refer to certain place in the data image using the label name. For instance, if we write</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;```</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        XYZ:    .data   +7,-57,17,9</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                mov    XYZ, r1</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;```</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    then register r1 is assigned with the value +7. If we continue to write</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;```</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        lea    XYZ, r1</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;```</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    then r1 would have been assigned with the address (in the data image) that stores the +7 value.</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;2. .string</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    The &#39;.string&#39; directive statement gets only one legal string as parameter. The meaning of &#39;.string&#39; directive statement is similar to the &#39;.data&#39; directive statement. The ASCII characters composed the string are coded to their appropriate numeric ASCII values) and get inserted to the data image by their order. At the end a zero value is being inserted, to mark the end of the string. The value of the data counter is to be increase, according to the length of the string + one. If the line includes a label name, then the value of the label name is going to point to the location in memory that stores the ASCII code of the first character of the string, at the same way as it was done for the &#39;.data&#39; string. For instance the directive statement</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;```</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        ABC:    .string    &quot;abcdef&quot;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;```</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    is going to allocate an array of characters of length 7 starting from the address stored in the ABC label name. This &quot;array&quot; is initialized to the ASCII value of characters &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39; in correspondence, the array is to be ended with the zero value concatenate to the end of the array.</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;3. .entry</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    The &#39;.entry&#39; directive statement gets one parameter only. This parameter is a label name, declared by other directive statement in the very same file where the The purpose of the &#39;.entry&#39; directive statement is to deal handle cases where a label name defined in an assembly source file A needs to be referred by other assembly source file(s) B, C, D, etc. In this case the &#39;.entry&#39; directive statement, written in the file A, gets the label name as its parameter (the &#39;.entry&#39; directive statement has to have a single parameter). For instance, if an assembly source file A contains the following lines</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;```</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        .entry HELLO</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        HELLO:  add        #1, r1</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;```</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    then other assembly source file(s), may refer to HELLO label name. Notice that a label at the beginning of the &#39;.entry&#39; directive is meaningless.</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;4. .extern</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    The &#39;.extern&#39; directive statement gets one parameter this parameter is the name of a label name defined in other assembly source file. The purpose of this directive statement is to declare that the label has been defined in other source file and that this assembly source file (the one that contains the &#39;.extern&#39; directive statement) is using it. The correspondence between the value of the label, as appeared in the source file where it was defined, and the operation instruction(s) that are using it as an argument is to be done at linking time.</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;```</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        .extern HELLO</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;```</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    Notice that a label at the beginning of the &#39;.extern&#39; directive is meaningless.</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;## Operation Statement</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;Operation statement is composed from the following:</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;1. Optional label.</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;2. Operation name.</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;3. Operands (the number of operands may be 0, 1 or 2 depending on the operation).</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;The length of a statement (of any type) cannot exceed 80 characters.</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;The name of the operation is to be written in lower case letter, operation name can be one of the 16 operations mentioned above.</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;After the operation name, separated with whitespace character(s), one or two operands may appear. In the case of two operands, the operands are separated with a comma &#39;,&#39; character. As mentioned before, whitespace character(s) may separate the comma and the operands. Operation statement with two operands has the following form:</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;| Label           | Operation   | Operands                ||</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;| --------------- | ----------- | ---------- | ----------- |</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;|                 |             | Source     | Destination |</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;| ``` HELLO: ```  | ``` add ``` | ``` r7,``` | ``` B ```   |</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;| ``` JUMP: ```   | ``` jnc ``` |            | ``` XYZ ``` |</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;| ``` END: ```    | ``` hlt ``` |            |             |</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;# Formal Definitions</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;## Label</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;Every label must begin with an upper or lower case letter, the rest of the label may contain letters or numbers. The length of the label cannot exceed 30 characters. The label ends with a column &#39;:&#39; character. The column character is not part of the label name it is just a sign representing the end of the character. The label must begin with the first column of the line. Label name cannot have more than one definition. The following labels are written correctly.</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;```</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        hEllo:</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        x:</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        He78940:</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;```</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;Label name cannot be the same as register or operation name.</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;The label derived its value from the syntax. Label written at the beginning of &#39;.data&#39; or &#39;.string&#39; directive gets the value of the appropriate data counter. Label written at the beginning of an operation statement gets the value of the appropriate operation counter.</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;## Number</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;Number is a string of decimal digits (0-9) that may optionally be preceded by either &#39;-&#39; or &#39;+&#39; sign. The number gets its value from its decimal representation represented by the string of digits. For instance the numbers</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;```</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        76, -5, +123</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;```</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;can be accepted as numbers. As mentioned, we do not handle rational or real numbers, only integers.</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;## String</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;String is a sequence of visible ASCII characters surrounded by double quotation marks. The quotation marks are not part of the string. The string</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;```</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        &quot;Hello World&quot;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;```</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;is an example for legal string.</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;# Two Pass Assembler</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;When the assembler is starting to translate code it needs to carry two major assignments. Its first assignment is to identify and translate the operation code and its second assignment is to determine addresses for all data and variables appeared in the source file(s). For instance, when the assembler reads the following code:</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;```</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                 .entry MAIN</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        MAIN:    mov    LEN, r1</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                lea    STR, r2</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        LOOP:    jnz    END</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                prn    @r2</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                sub    #1, r1</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                inc    r2</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                jnc    *LOOP</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        END:     hlt</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        STR:     .string &quot;abcdef&quot;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        LEN:     .data 6</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;```</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;it has to replace the operation names mov, lea, jnz, prn, sub, inc, jnc, hlt with their equivalent binary codes, in addition, the assembler has to replace the symbols STR, LEN, MAIN, LOOP, END with their appropriate addresses that have been allocated for the directive statements.</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;Assuming that the code in example I has being translated by the assembler and has been stored (operations and directives) in a memory block that starts from address 0000, then this translation can be described as follow:</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;| Label         | Address | Command         | Operand(s)        | Machine Code |</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;| ------------- | ------- | --------------- | ----------------- | ------------ |</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;|               |         | ``` .entry ```  |  ``` MAIN ```     |              |</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;| ``` MAIN: ``` | 0000    | ``` mov ```     |  ``` LEN, r1 ```  | 0221         |</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;|               | 0001    |                 |                   | 0014         |</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;|               | 0002    | ``` lea ```     |  ``` STR, r2 ```  | 6222         |</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;|               | 0003    |                 |                   | 000d         |</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;| ``` LOOP: ``` | 0004    | ``` jnz ```     |  ``` END ```      | 9008         |</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;|               | 0005    |                 |                   | 000c         |</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;|               | 0006    | ``` prn ```     |  ``` @r2 ```      | c02a         |</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;|               | 0007    | ``` sub ```     |  ``` #1, r1 ```   | 3021         |</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;|               | 0008    |                 |                   | 0001         |</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;|               | 0009    | ``` inc ```     |  ``` r2 ```       | 7022         |</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;|               | 000a    | ``` jnc ```     |  ``` *LOOP ```    | a018         |</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;|               | 000b    |                 |                   | fffa         |</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;| ``` END: ```  | 000c    | ``` hlt ```     |                   | f000         |</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;| ``` STR: ```  | 000d    | ``` .string ``` |  ``` &quot;abcdef&quot; ``` | 0061         |</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;|               | 000e    |                 |                   | 0062         |</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;|               | 000f    |                 |                   | 0063         |</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;|               | 0010    |                 |                   | 0064         |</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;|               | 0011    |                 |                   | 0065         |</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;|               | 0012    |                 |                   | 0066         |</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;|               | 0013    |                 |                   | 0000         |</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;| ``` LEN: ```  | 0014    | ``` .data ```   |  ``` 6 ```        | 0006         |</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;If the assembler maintains a table of all the operation names and their corresponding binary codes, then all operation names can be easily converted. Whenever the assembler reads an operation name it can simply use the table to find its equivalent binary code. In order to carry the same conversion for the addresses of symbols the assembler has to build similar table.</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;For instance, in example I, prior to reading the source file(s) the assembler has no way to know that the LOOP symbol relates to address 0004.</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;Thus, in regards to all symbols that have been defined by the programmer, the assembler has to accomplish two separate tasks. The first task is to build a table of all symbols and their related numeric values, and the second is to replace all the symbols, appeared in the source file(s) with the numeric values of the address fields. This two assignments can be achieved by performing two separate scans (passes) on the source file(s). In the first pass the assembler builds a table of symbols, this table correspond address to each symbol.</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;In the second pass the assembler translate the source file(s) into binary machine code.</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;Notice that the two passes are done by the assembler, during translation (in the assembly time), before the linking process.</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;After the translation process, the program may be linked and load to memory for execution.</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;## First pass</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;In the first pass, each instruction is being substituted with its appropriate code and the table of symbols is being built. The rest of the code are left untouched. The code should be loaded at address zero. After applying the first pass on example I, we should get the following result</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;The table of symbols:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;| Name | Value | Image       |</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;| ---- | ----- | ----------- |</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;| MAIN | 0000  | instruction |</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;| LOOP | 0004  | instruction |</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;| END  | 000c  | instruction |</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;| STR  | 0000  | data        |</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;| LEN  | 0007  | data        |</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;List of entries:</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;| Name | Value |</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;| ---- | ----- |</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;| MAIN | ????  |</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;Data image:</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;| Address | Value |</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;| ------- | ----- |</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;| 0000    | 0061  |</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;| 0001    | 0062  |</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;| 0002    | 0063  |</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;| 0003    | 0064  |</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;| 0004    | 0065  |</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;| 0005    | 0066  |</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;| 0006    | 0000  |</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;| 0007    | 0006  |</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;Instruction image:</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;| Address | Value |</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;| ------- | ----- |</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;| 0000    | 0221  |</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;| 0001    | ????  |</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;| 0002    | 6222  |</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;| 0003    | ????  |</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;| 0004    | 9008  |</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;| 0005    | ????  |</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;| 0006    | c02a  |</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;| 0007    | 3021  |</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;| 0008    | ????  |</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;| 0009    | 7022  |</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;| 000a    | a018  |</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;| 000b    | ????  |</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;| 000c    | f000  |</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;## Second pass</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;Applying the second pass on the code of example I yields the following final results:</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;| Name | Value | Image       |</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;| ---- | ----- | ----------- |</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;| MAIN | 0000  | object code |</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;| LOOP | 0004  | object code |</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;| END  | 000c  | object code |</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;| STR  | 000d  | object code |</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;| LEN  | 0014  | object code |</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;List of entries:</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;| Name | Value |</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;| ---- | ----- |</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;| MAIN | 0000  |</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;Object code:</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;| Address | Machine Word |</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;| ------- | ------------ |</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;| 0000    | 0221         |</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;| 0001    | 0014         |</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;| 0002    | 6222         |</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;| 0003    | 000d         |</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;| 0004    | 9008         |</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;| 0005    | 000c         |</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;| 0006    | c02a         |</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;| 0007    | 3021         |</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;| 0008    | 0001         |</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;| 0009    | 7022         |</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;| 000a    | a018         |</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;| 000b    | fffa         |</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;| 000c    | f000         |</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;| 000d    | 0061         |</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;| 000e    | 0062         |</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;| 000f    | 0063         |</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;| 0010    | 0064         |</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;| 0011    | 0065         |</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;| 0012    | 0066         |</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;| 0013    | 0000         |</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;| 0014    | 0006         |</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;When the assembler program is done an object code is generated this object code is to be sent to a linker program. The purpose of the linker program is described as follows:</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;1. To allocate the program with place in memory (allocation).</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;2. To link the object file into one executable file (linking)</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;3. To change addresses according to the loading place (relocation)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;4. To physically load the code into memory.</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;After the linker program is done the program can be loaded to memory and is ready to run. We are not going to make further discussion on how the linker program works.</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;# The format of output files</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;The object file written by the assembler provides informations about machine&#39;s memory. The first instruction is to be inserted to memory address 0, the second instruction is to be inserted to be inserted to memory address 2,3 or 4 (depending on the length of the first instruction) and so fourth until the translation of the last instruction. The next memory address, after the last translated instruction, contains the data that were built by the &#39;.data&#39; and &#39;.string&#39; instructions, their order of appearance in memory depends on their precedence of appearance in the source file (first instruction occupies first free memory in a rising order).</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;## The object code file (.oc)</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;The object file is composed out of lines of text. The first line contains (in octal) the length of the code and the length of data, both are in terms of memory words. Those two numbers must be separated by white space. Each of the next lines provides information on the content of memory address (in octal form) starting from memory address 0. In addition, for each memory address, occupied by instruction (not data), there appear additional information for the linker. This additional information could be one of the following three characters: &#39;e&#39; &#39;a&#39; or &#39;r&#39;. The character &#39;a&#39; designates the fact that the content of the memory address is absolute and does not depend on where the file is to be loaded (the assembler assumes it to start from memory address 0). The character &#39;r&#39; designates the fact that memory address is relocatable and should be added with the appropriate offset, in regards to where the file is to be loaded. The offset is the first memory address from which the first instruction of the program is to be loaded. The letter &#39;d&#39; designates the fact that the content of the file depends on external variable, the linker program is to take care on the insertion of the appropriate value.</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;## The entries file (.ent)</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;The entries file is composed out of lines of text. Each line contains the entry name and value, as it was computed for this file.</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;## The externals file (.ext)</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;The externals file is composed out of lines of text. Each line contains the name and memory address of the external variable.</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;## Example files</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;### test</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;Prints the string &quot;abcdef&quot;.</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;*test.as*</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;```</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;; test.as</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;; Prints the string &quot;abcdef&quot;.</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;       .entry MAIN     ; file contains the definition of MAIN</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;MAIN:  mov  LEN, r1    ; move LEN(6) to r1</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;       lea  STR, r2    ; load the address of STR to r2</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;LOOP:  jnz  END        ; if not zero, jump to END</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;       prn  @r2        ; print the character at the memory location that r2 holds</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;       sub  #1, r1     ; r1 = r1 - 1</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;       inc  r2         ; r2 = r2 + 1</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;       jnc  *LOOP      ; jump to LOOP of carry flag is not set (sub sets it)</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;END:   hlt             ; end of the program</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;STR:   .string  &quot;abcdef&quot;   ; string to print</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;LEN:   .data   6           ; length of the string</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;```</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;*test.oc*</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;```</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;d 8</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;0000 0221 a</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;0001 0014 r</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;0002 6222 a</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;0003 000d r</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;0004 9008 a</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;0005 000c r</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;0006 c02a a</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;0007 3021 a</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;0008 0001 a</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;0009 7022 a</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;000a a018 a</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;000b fffa a</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;000c f000 a</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;000d 0061  </div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;000e 0062  </div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;000f 0063  </div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;0010 0064  </div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;0011 0065  </div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;0012 0066  </div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;0013 0000  </div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;0014 0006</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;```</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;*test.ent*</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;```</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;MAIN 0000</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;```</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;### ps</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;The main routine of the program of reversing string &quot;abcdef&quot;.</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;*ps.as*</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;```</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;; ps.as</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;; Includes main routine of reversing string &quot;abcdef&quot;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;MAIN:  lea STR, STRADD</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;       jsr COUNT</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;       jsr PRTSTR</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;       mov *STRADD, LASTCHAR</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;       add LEN, LASTCHAR</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;       dec LASTCHAR</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;       jsr REVERSE</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;       jsr PRTSTR</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;       hlt</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;.entry STRADD</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;.entry MAIN</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;.extern REVERSE</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;.extern PRTSTR</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;.extern COUNT</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;STRADD:        .data 0</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;STR:       .string &quot;abcdef&quot;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;LASTCHAR:  .data 0</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;LEN:       .data 0</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;```</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;*ps.oc*</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;```</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;14 a</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;0000 6208 a</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;0001 0015 r</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;0002 0014 r</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;0003 d008 a</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;0004 0000 e</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;0005 d008 a</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;0006 0000 e</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;0007 0608 a</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;0008 000d a</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;0009 001c r</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;000a 2208 a</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;000b 001d r</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;000c 001c r</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;000d 8008 a</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;000e 001c r</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;000f d008 a</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;0010 0000 e</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;0011 d008 a</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;0012 0000 e</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;0013 f000 a</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;0014 0000  </div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;0015 0061  </div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;0016 0062  </div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;0017 0063  </div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;0018 0064  </div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;0019 0065  </div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;001a 0066  </div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;001b 0000  </div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;001c 0000  </div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;001d 0000  </div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;```</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;*ps.ent*</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;```</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;STRADD 0014</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;MAIN 0000</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;```</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;*ps.ext*</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;```</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;COUNT 0004</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;PRTSTR 0006</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;REVERSE 0010</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;PRTSTR 0012</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;```</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;# Usage of tas</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;```</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        tas &lt;options&gt; source-file</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;```</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;where the options are:</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;```</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        -l : prints debugging lists after each pass</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        -n : creates NO output files</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        -h : shows this text</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;```</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;# Compilation of tas</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;Use [premake5](https://premake.github.io) to generate the build configuration.</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;*Windows*</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;```</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        cd tas</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        premake5 vs2017</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        cd build</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        tas.sln</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;```</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;*Linux*</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;```</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;       cd tas</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;       premake5 gmake</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;       cd build</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;       make                # build default (Debug) configuration</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;       make config=release # build Release configuration</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;```</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
